
    
    <div class="mobile-header-active mobile-header-wrapper-style">
        <div class="mobile-header-wrapper-inner">
            <div class="mobile-header-top">
                <div class="mobile-header-logo">
                    <a href="#"><img src="/assets/imgs/theme/logo-color.png" alt="logo"></a>
                </div>
                <div class="mobile-menu-close close-style-wrap close-style-position-inherit">
                    <button class="close-style search-close">
                        <i class="icon-top"></i>
                        <i class="icon-bottom"></i>
                    </button>
                </div>
            </div>
            <div class="mobile-header-content-area">
                <div class="mobile-search search-style-3 mobile-header-border">
                    <form action="#">
                        <input type="text" placeholder="Search for items…">
                        <button type="submit"><i class="fi-rs-search"></i></button>
                    </form>
                </div>
                <div class="mobile-menu-wrap mobile-header-border">
                    <div class="main-categori-wrap mobile-header-border">
                        <a href="/shop">
                            <span class="fi-rs-apps"></span> Browse Categories
                        </a>
                       
                    </div>
                    <!-- mobile menu start -->
                    <nav>
                        <ul class="mobile-menu">
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a href="/">Home</a>
                               
                            </li>
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a href="/shop">shop</a>
                                
                            </li>
                            
                          
                           
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a href="#">Language</a>
                                <ul class="dropdown">
                                    <li><a href="#">English</a></li>
                                   
                                </ul>
                            </li>
                        </ul>
                    </nav>
                    <!-- mobile menu end -->
                </div>
                <div class="mobile-header-info-wrap mobile-header-border">
                    <div class="single-mobile-header-info mt-30">
                        <a  href="#"> Our location </a>
                    </div>
                    <div class="single-mobile-header-info">
                        <a href="/login">Log In / Sign Up </a>
                    </div>
                    <div class="single-mobile-header-info">
                        <a href="#">(+91) - 2345 - 6789 </a>
                    </div>
                </div>
                
            </div>
        </div>
    </div>
    <main class="main">
        <div class="page-header breadcrumb-wrap">
            <div class="container">
                <div class="breadcrumb">
                    <a href="/" rel="nofollow">Home</a>
                    <span></span> Pages
                    <span></span> Account
                </div>
            </div>
        </div>
        <section class="pt-25 pb-150">
            <div class="container">
                <div class="row">
                    <div class="col-lg-10 m-auto">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="dashboard-menu">
                                    <ul class="nav flex-column" role="tablist">
                                        <li class="nav-item">
                                            <a class="nav-link active" id="dashboard-tab" data-bs-toggle="tab" href="#dashboard" role="tab" aria-controls="dashboard" aria-selected="false"><i class="fi-rs-settings-sliders mr-10"></i>Dashboard</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" id="track-orders-tab" data-bs-toggle="tab" href="#track-orders" role="tab" aria-controls="track-orders" aria-selected="false"><i class=" fi-wallet"></i>My wallet</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" id="orders-tab" data-bs-toggle="tab" href="#orders" role="tab" aria-controls="orders" aria-selected="false"><i class="fi-rs-shopping-bag mr-10"></i>Orders</a>
                                        </li>
                                        <!-- <li class="nav-item">
                                            <a class="nav-link" id="track-orders-tab" data-bs-toggle="tab" href="#track-orders" role="tab" aria-controls="track-orders" aria-selected="false"><i class="fi-rs-shopping-cart-check mr-10"></i>Track Your Order</a>
                                        </li> -->
                                        <li class="nav-item">
                                            <a class="nav-link" id="address-tab" data-bs-toggle="tab" href="#address" role="tab" aria-controls="address" aria-selected="true"><i class="fi-rs-marker mr-10"></i>My Address</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" id="account-detail-tab" data-bs-toggle="tab" href="#account-detail" role="tab" aria-controls="account-detail" aria-selected="true"><i class="fi-rs-user mr-10"></i>Account details</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" href="/logout"><i class="fi-rs-sign-out mr-10"></i>Logout</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-md-8">
                                <div class="tab-content dashboard-content">
                                    <div class="tab-pane fade active show" id="dashboard" role="tabpanel" aria-labelledby="dashboard-tab">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0">Hello <%=username%>! </h5>
                                            </div>
                                            <div class="card-body">
                                                <p>From your account dashboard. you can easily check &amp; view your <a href="#">recent orders</a>, manage your <a href="#">shipping and billing addresses</a> and <a href="#">edit your password and account details.</a></p>
                                            </div>
                                        </div>
                                    </div>
                                    <!--wallet-->
                                    <div class="tab-pane fade" id="track-orders" role="tabpanel" aria-labelledby="track-orders-tab">
                                        <div class="card">

                                            <div class="card-header">
                                                <h5 class="mb-0">Wallet Amount : <%= walletData?.walletBalance?.toLocaleString("en-IN", {
                                                    style: "currency",
                                                    currency: "INR",
                                                    minimumFractionDigits: 2,
                                                    maximumFractionDigits: 2,
                                                }) ?? 'N/A' %></h5>
                                            </div>
                                            
                                            <div class="card-body">
                                                <div class="table-responsive">
                                                    <table class="table">
                                                        <thead>
                                                            <tr>
                                                                
                                                                <th>Order no.</th>
                                                                <th>Date</th>
                                                                <th>payment</th>
                                                                 <th>Amount</th>
                                                                
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <% walletData?.transaction?.forEach(function(object,index){%>
                                                            <tr>
                                                                <td><%=index+1 %> </td>
                                                                <td><%=object.createdAt%></td>
                                                                <td><%=object.Type%></td>
                                                                <td><%=object.amount%></td>
                                                                
                                                                
                                                              
                                                            </tr>
                                                        <%})%>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                
                                            </div>
                                        </div>
                                    </div>
                                    <!--order-->
                                    <div class="tab-pane fade" id="orders" role="tabpanel" aria-labelledby="orders-tab">
                                        <%if(orderCount===0){%>
                                            <h1>My Orders</h1>
                                            <p>Currently you have no order</p>
                                            
                                            <a href="/shop">Browse products</a>
                                        <%}else{%>
                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0">Your Orders</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="table-responsive">
                                                    <table class="table">
                                                        <thead>
                                                            <tr>
                                                                <th>Order</th>
                                                                <th>Date</th>
                                                                <th>payment</th>
                                                                
                                                                <th>order Status</th>
                                                                <th>Total</th>
                                                                <th>Actions</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <% orderedList.forEach(function(object){%>
                                                            <tr>
                                                                <td><%= object.hashedId%></td>
                                                                <td><%=object.CreatedAt%></td>
                                                                <td><%=object.paymentMethod%></td>
                                                                
                                                                <td><%=object.orderStatus%></td>
                                                                <td>₹<%=object.totalPrice%></td>
                                                                <td><a href="/view-order-products/<%=object._id%>" class="btn-small d-block">View</a></td>
                                                            </tr>
                                                        <%})%>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                
                                            </div>
                                        </div>
                                    <%}%>
                                    </div>
                                  
                                    <!-- user address-->
                                    <div class="tab-pane fade" id="address" role="tabpanel" aria-labelledby="address-tab">
                                        <div class="row">
                                            <div style="display: flex;flex-wrap: wrap;">
                                                <% address.forEach(function(addressObject, index){%>
                                                  <% addressObject.Address.forEach(function(address, i){ %>
                                                    <div class="card mb-3 mb-lg-0 m-3" style="width:300px" id="address-card-<%= index %>-<%= i %>">
                                                      <div class="card-header">
                                                        <h5 class="mb-0">Shipping Address</h5>
                                                      </div>
                                                      <div class="card-body">
                                                        <address>
                                                          <%=address.building%><br>
                                                          <%=address.street%>,<br>
                                                          <%=address.city%> <br>
                                                          <%=address.pincode%>
                                                        </address>
                                                        <p><%=address.state%></p>
                                                        <a href="#" class="btn-small" onclick="editAddress('<%= index %>, <%= i %>');">Edit</a>
                                                      </div>
                                                    </div>
                                                  <% }) %>
                                                <%})%>
                                              </div>
                                              
                                           
                                            <!---add address-->

                                            <div class="ship_detail">
                                                <div class="form-group">
                                                    <div class="chek-form">
                                                    <div class="custome-checkbox">
                                                      <input class="form-check-input" type="checkbox" name="checkbox" id="differentaddress">
                                                      <label class="form-check-label label_info" data-bs-toggle="collapse"
                                                        data-target="#collapseAddress" href="#collapseAddress" aria-controls="collapseAddress"
                                                        for="differentaddress"><span> <a href="#" class="btn-small">Add
                                                            Address</a></span></label>
                                                    </div>
                                                </div>
                                                </div>
                                                <div id="collapseAddress" class="different_address collapse in">
                                                  <form action="/addAddress" method="post" >
                                                    <input type="hidden" name="userId" value="">
                                                    <div class="form-group">
                                                      <label for="name">First Name *</label>
                                                      <input type="text" name="name" id="name" placeholder="Enter your first name"
                                                        onblur="namecheck()" required>
                                                      <label id="nmlabel" for="name" style="display: none; color:red;">This field is
                                                        required</label>
                                                      <label id="nmlabel-01" for="name" style="display: none; color:red;">Name doesn't start
                                                        with a number</label>
                                                      <label id="nmlabel-02" for="name" style="display: none; color:red;">Name doesn't contain
                                                        special characters</label>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="Lname">Last Name *</label>
                                                        <input type="text" name="Lname" id="Lname" placeholder="Enter your first name"
                                                          onblur="namecheck()" required>
                                                        <label id="nmlabel" for="Lname" style="display: none; color:red;">This field is
                                                          required</label>
                                                        <label id="nmlabel-01" for="Lname" style="display: none; color:red;">Name doesn't start
                                                          with a number</label>
                                                        <label id="nmlabel-02" for="Lname" style="display: none; color:red;">Name doesn't contain
                                                          special characters</label>
                                                      </div>
                                                    <div class="form-group">
                                                      <label for="phone">Phone *</label>
                                                      <input type="tel" name="phone" id="phone"  placeholder="Enter your phone number"
                                                        onblur="phonecheck()" required>
                                                      <label id="ml" for="phone" style="display: none; color:red;">This field is
                                                        required</label>
                                                      <label id="ml-01" for="phone" style="display: none; color:red;">Minimum 10
                                                        digits required</label>
                          
                                                    </div>
                                                    <div class="form-group">
                                                      <label for="address">Address *</label>
                                                      <input type="text" name="billingaddress" id="address" 
                                                        placeholder="Enter your address"  onblur="addresscheck()" required>
                                                      <label id="adlabel" for="address" style="display: none; color:red;">This field is
                                                        required</label>
                                                      <label id="adlabel-01" for="address" style="display: none; color:red;">Address doesn't start
                                                        with a number</label>
                                                      <label id="adlabel-02" for="address" style="display: none; color:red;">Address doesn't contain
                                                        special characters</label>
                          
                                                    </div>
                                                    <div class="form-group">
                                                      <label for="address2">Street</label>
                                                      <input type="text" name="billingaddress2" id="address2"
                                                        placeholder="Enter your address line 2" onblur="addressLcheck()" required>
                                                      <label id="adLlabel" for="address2" style="display: none; color:red;">This field is
                                                        required</label>
                                                      <label id="adLlabel-01" for="address2" style="display: none; color:red;">Address doesn't start
                                                        with a number</label>
                                                      <label id="adLlabel-02" for="address2" style="display: none; color:red;">Address doesn't contain
                                                        special characters</label>
                                                    </div>
                                                    <div class="form-group">
                                                      <label for="city">City/Town *</label>
                                                      <input type="text" name="city" id="city"  placeholder="Enter your city/town" onblur="addresscheck()" required>
                                                      <label id="adlabel" for="address2" style="display: none; color:red;">This field is
                                                        required</label>
                                                      <label id="adlabel-01" for="address2" style="display: none; color:red;">Address doesn't start
                                                        with a number</label>
                                                      <label id="adlabel-02" for="address2" style="display: none; color:red;">Address doesn't contain
                                                        special characters</label>
                          
                                                    </div>
                                                    <div class="form-group">
                                                      <label for="state">State/County *</label>
                                                      <input type="text" name="state" id="state" required placeholder="Enter your state/county">
                          
                                                    </div>
                                                    <div class="form-group">
                                                      <label for="zipcode">Postcode/ZIP *</label>
                                                      <input type="text" name="zipcode" id="zipcode" required
                                                        placeholder="Enter your postcode/ZIP">
                          
                                                    </div>
                                                    <button type="submit" class="btn btn-success mt-4">Submit</button>
                                                  </form>
                          
                                                </div>
                                              
                                             </div>
                                        </div>
                                    </div>
                                    <!--account details-->
                                    <div class="tab-pane fade" id="account-detail" role="tabpanel" aria-labelledby="account-detail-tab">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5>Change user name and Password</h5>
                                            </div>
                                            <div class="card-body">
                                                <!-- <p>Already have an account? <a href="page-login-register.html">Log in instead!</a></p> -->
                                                
                                                    <div class="row">
                                                        <!-- <div class="form-group col-md-6">
                                                            <label> Name <span class="required">*</span></label>
                                                            <input required="" class="form-control square" name="name" type="text"><i class="fas fa-edit"></i>

                                                        </div> -->
                                                        <div class="form-group col-md-6">
                                                            <label> Name <span >*</span></label>
                                                            <div class="input-group">
                                                                <input  class="form-control square" name="name" type="text">
                                                                <a href="#" class="btn btn-primary">change<i class="fas fa-edit"></i></a>
                                                            </div>
                                                        </div>
                                                        
                                                        <div class="form-group col-md-12">
                                                            <label>Email Address <span class="required">*</span></label>
                                                            <input required="" class="form-control square" name="email" type="email">
                                                        </div>
                                                        
                                                        
                                                        <!--reset password-->

                                                        <div class="ship_detail">
                                                            <div class="form-group">
                                                                <div class="chek-form">
                                                                <div class="custome-checkbox">
                                                                  <input class="form-check-input" type="checkbox" name="checkbox" id="differentaddress">
                                                                  <label class="form-check-label label_info" data-bs-toggle="collapse"
                                                                    data-target="#collapseAddress" href="#collapseAddress" aria-controls="collapseAddress"
                                                                    for="differentaddress"><span> <a href="#" class="btn-small">Reset
                                                                        Password</a></span></label>
                                                                </div>
                                                            </div>
                                                            </div>
                                                            <div id="collapseAddress" class="different_address collapse in">
                                                              <form id="resetPassword">
                                                                <input type="hidden" name="userId" value="">
                                                                <div class="form-group col-md-12">
                                                                    <label>Current Password <span class="required">*</span></label>
                                                                    <input required="" class="form-control square" name="password" type="password" id="Currentpassword">
                                                                </div>
                                                                <input type="text" name="userId" style="display: none;" value="">
                                                                <div class="mb-3">
                                                                  <label for="password2" class="form-label">New Pasword</label>
                                                                  <input type="password" 
                                                                  id="password2" 
                                                                  class="form-control" 
                                                                  name="password2" 
                                                                  placeholder="Enter Your New password" required
                                                                >
                                                                    <span id="pass-error" class="validation-label"></span>
                                                  
                                                                </div>
                                                                <div class="mb-3">
                                                                  <label for="cnfrm-password" class="form-label">Re Enter Pasword</label>
                                                                  <input 
                                                                  type="password" 
                                                                  id="cnfrm-password" 
                                                                  class="form-control" 
                                                                  name="cnfrm-password" 
                                                                  placeholder="Re Enter Your New password"
                                                                  required
                                                                  >
                                                                    <span id="pass-error" class="validation-label"></span>
                                                  
                                                                </div>
                                                               
                                                                <div class="col-md-12">
                                                                    <button onclick="changePassword(event,'<%=userId%>')" class="btn btn-fill-out submit" >Save</button>
                                                                </div>

                                                                
                                                              </form>
                                      
                                                            </div>
                                                          
                                                         </div>
                                                        <!--reset password end-->
                                                        
                                                       
                                                       
                                                        
                                                        
                                                    </div>
                                                
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    <footer class="main">
        <section class="newsletter p-30 text-white wow fadeIn animated">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-7 mb-md-3 mb-lg-0">
                        <div class="row align-items-center">
                            <div class="col flex-horizontal-center">
                                <img class="icon-email" src="assets/imgs/theme/icons/icon-email.svg" alt="">
                                <h4 class="font-size-20 mb-0 ml-3">Sign up to Newsletter</h4>
                            </div>
                            <div class="col my-4 my-md-0 des">
                                <h5 class="font-size-15 ml-4 mb-0">...and receive <strong> get coupon for first shopping.</strong></h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-5">
                        
                    </div>
                </div>
            </div>
        </section>
       
       
    </footer>
    <!-- Preloader Start -->
    <div id="preloader-active">
        <div class="preloader d-flex align-items-center justify-content-center">
            <div class="preloader-inner position-relative">
                <div class="text-center">
                    <h5 class="mb-5">Now Loading</h5>
                    <div class="loader">
                        <div class="bar bar1"></div>
                        <div class="bar bar2"></div>
                        <div class="bar bar3"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Vendor JS-->
   <script>
   function changePassword(event,userid){
    
    event.preventDefault()
    
    $.ajax({
        url:'/reset-password',
        type:'post',
        data:$('#resetPassword').serialize()+'&userid='+userid,
        success:function(response){
            console.log("response",response);

            if(response){
            swal('Password reset successfully').then(()=>{
                location.href="/logout"
            })

              
    

            }else{
                swal(' invalid password').then(()=>{
                    location.reload()
                })
                
            }
            
        }

        

    })
   }

   </script>
  